<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="/swift-macos/style.css">
    <link rel="stylesheet" href="/swift-macos/syntax.css">
    <title>Swift macOS</title>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-md">
                <h1>WebView</h1>

                <p>A <code class="language-plaintext highlighter-rouge">WKWebView</code> from the WebKit framework is used to display web content in a window. The web view can be wrapped with <code class="language-plaintext highlighter-rouge">NSViewRepresentable</code> to make it usable with SwiftUI. Content for the web view can be loaded from an HTML file, from a string containing HTML, or from a URL representing a website address. Don‚Äôt forget to enable ‚ÄúOutgoing Connections‚Äù in the target‚Äôs ‚ÄúApp Sandbox‚Äù; otherwise, the website will not display in the app.</p>

<h2 id="load-an-html-file">Load an HTML file</h2>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- page.html --&gt;</span>

<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;style&gt;</span>
    <span class="nd">:root</span> <span class="p">{</span> <span class="py">color-scheme</span><span class="p">:</span> <span class="n">light</span> <span class="n">dark</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Hello again friend üòÅ<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;p&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Done.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>
<span class="kd">import</span> <span class="kt">WebKit</span>

<span class="kd">struct</span> <span class="kt">WebView</span><span class="p">:</span> <span class="kt">NSViewRepresentable</span> <span class="p">{</span>

    <span class="k">let</span> <span class="nv">htmlFile</span><span class="p">:</span> <span class="kt">String</span>

    <span class="kd">func</span> <span class="nf">makeNSView</span><span class="p">(</span><span class="nv">context</span><span class="p">:</span> <span class="kt">Context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">WKWebView</span> <span class="p">{</span>

        <span class="k">guard</span> <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">Bundle</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="nf">url</span><span class="p">(</span><span class="nv">forResource</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">htmlFile</span><span class="p">,</span> <span class="nv">withExtension</span><span class="p">:</span> <span class="s">"html"</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kt">WKWebView</span><span class="p">()</span>
        <span class="p">}</span>

        <span class="k">let</span> <span class="nv">webview</span> <span class="o">=</span> <span class="kt">WKWebView</span><span class="p">()</span>
        <span class="n">webview</span><span class="o">.</span><span class="nf">loadFileURL</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nv">allowingReadAccessTo</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">webview</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">updateNSView</span><span class="p">(</span><span class="n">_</span> <span class="nv">nsView</span><span class="p">:</span> <span class="kt">WKWebView</span><span class="p">,</span> <span class="nv">context</span><span class="p">:</span> <span class="kt">Context</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="kd">struct</span> <span class="kt">ContentView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">WebView</span><span class="p">(</span><span class="nv">htmlFile</span><span class="p">:</span> <span class="s">"page"</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
            <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">480</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">600</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="load-a-string-containing-html">Load a string containing HTML</h2>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>
<span class="kd">import</span> <span class="kt">WebKit</span>

<span class="kd">struct</span> <span class="kt">WebView</span><span class="p">:</span> <span class="kt">NSViewRepresentable</span> <span class="p">{</span>

    <span class="k">let</span> <span class="nv">content</span><span class="p">:</span> <span class="kt">String</span>

    <span class="kd">func</span> <span class="nf">makeNSView</span><span class="p">(</span><span class="nv">context</span><span class="p">:</span> <span class="kt">Context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">WKWebView</span> <span class="p">{</span>

        <span class="k">let</span> <span class="nv">webview</span> <span class="o">=</span> <span class="kt">WKWebView</span><span class="p">()</span>
        <span class="n">webview</span><span class="o">.</span><span class="nf">loadHTMLString</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="nv">baseURL</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">webview</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">updateNSView</span><span class="p">(</span><span class="n">_</span> <span class="nv">nsView</span><span class="p">:</span> <span class="kt">WKWebView</span><span class="p">,</span> <span class="nv">context</span><span class="p">:</span> <span class="kt">Context</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="k">let</span> <span class="nv">htmlContent</span> <span class="o">=</span> <span class="s">"""
&lt;html&gt;
&lt;head&gt;
&lt;style&gt;
    :root { color-scheme: light dark; }
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Hello friend!&lt;/h1&gt;
    &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&lt;/p&gt;
    &lt;p&gt;Done.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
"""</span>

<span class="kd">struct</span> <span class="kt">ContentView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">WebView</span><span class="p">(</span><span class="nv">content</span><span class="p">:</span> <span class="n">htmlContent</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
            <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">480</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">600</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="load-from-a-url">Load from a URL</h2>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>
<span class="kd">import</span> <span class="kt">WebKit</span>

<span class="kd">struct</span> <span class="kt">WebView</span><span class="p">:</span> <span class="kt">NSViewRepresentable</span> <span class="p">{</span>

    <span class="k">let</span> <span class="nv">url</span><span class="p">:</span> <span class="kt">String</span>

    <span class="kd">func</span> <span class="nf">makeNSView</span><span class="p">(</span><span class="nv">context</span><span class="p">:</span> <span class="kt">Context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">WKWebView</span> <span class="p">{</span>

        <span class="k">guard</span> <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kt">WKWebView</span><span class="p">()</span>
        <span class="p">}</span>

        <span class="k">let</span> <span class="nv">webview</span> <span class="o">=</span> <span class="kt">WKWebView</span><span class="p">()</span>
        <span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">URLRequest</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>
        <span class="n">webview</span><span class="o">.</span><span class="nf">load</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">webview</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">updateNSView</span><span class="p">(</span><span class="n">_</span> <span class="nv">nsView</span><span class="p">:</span> <span class="kt">WKWebView</span><span class="p">,</span> <span class="nv">context</span><span class="p">:</span> <span class="kt">Context</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="kd">struct</span> <span class="kt">ContentView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">WebView</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://www.apple.com"</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
            <span class="o">.</span><span class="nf">frame</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="mi">480</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">600</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

            </div>
        </div>

        <div class="row my-5">
            <div class="col-md">
                <p><a href="/swift-macos/"><b>‚Üê Back</b></a></p>
            </div>
        </div>

        <div class="row my-5">
            <div class="col-md">
                <p class="text-center small">Gavin Wiggins ¬© 2021</p>
            </div>
        </div>
    </div>
</body>
</html>